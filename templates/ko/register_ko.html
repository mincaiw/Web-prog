<!DOCTYPE html>
<html lang="ko">

  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="utf-8" />
    <script type="text/javascript" src="https://oapi.map.naver.com/openapi/v3/maps.js?ncpKeyId=udhwj5en73"></script>
    <title>Yonsei Lost & Found</title>
    <!-- Chrome, Safari, IE -->
    <link
      rel="shortcut icon"
      href="static/images/기본형_심볼-01_cut.png"
      type="image/png"
    />
    <link
      rel="icon"
      href="static/images/기본형_심볼-01_cut.png"
      type="image/png"
    />
  <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/style_register.css') }}" />
  <style>
    #map {
      width: 100%;
      height: 500px;
      border: 1px solid #ccc;
      margin-top: 20px;
    }
    </style>
  </head>

<body>
    <header>
    <div class="container">
        <!-- Logo -->
        <div class="logo">
          <img
            src="{{ url_for('static', filename='images/기본형_심볼-03-removebg-preview.png') }}"
            alt="Yonsei"
            style="width: 225px; height: auto"
          />
        </div>
        
        <!-- Langugages -->
        <ul class="gnb_lang">
            <li><a href="{{ url_for('index_ko') }}">한국어</a></li>
            <li><a href="{{ url_for('index_en') }}">ENGLISH</a></li>
            <li><a href="{{ url_for('index_ch') }}">中文</a></li>
        </ul>
    </div>

<div class="findList">

    <div class="lost_qfind2">
        <h2>습득물을 등록해보세요!</h2>
    </br>

            <div class="list">
                <!-- 습득물 종류 입력 -->
                <label for="PRDT_CL_NM">분류명(내용):</label><br>
                <input type="text" id="PRDT_CL_NM" name="PRDT_CL_NM"><br><br>

                <!-- 날짜입력 -->
                <label for="START_YMD">습득기간:</label><br>
                <input type="date" id="START_YMD" name="START_YMD"><br><br>

                <!-- 습득물명 입력 -->
                <label for="PRDT_NM">습득물명:</label><br>
                <input type="text" id="PRDT_NM" name="PRDT_NM"><br><br>

                    <!-- 건물 선택  -->
                    <label for="DEP_PLACE">습득한 건물선택:</label><br>
                    <select name="uBuilding" id="uBuilding">
                      <option value="ALL" selected>전체</option> 
                      <option value="101">언더우드기념도서관</option>
                      <option value="203">운동장</option>
                      <option value="305">송도1학사</option>
                      <option value="405">송도2학사</option>
                      <option value="302">자유관A</option>
                      <option value="301">자유관B</option>
                      <option value="510">저에너지친환경실험주택</option>
                      <option value="501">종합관</option>
                      <option value="401">진리관A</option>
                      <option value="402">진리관B</option>
                      <option value="502">진리관C</option>
                      <option value="503">진리관D</option>
                    </select>
                    <div id="map"></div>

            </div>
            <input type="submit" value="Submit">
        </div>
      </div>
    </header>
    <script>
      const buildingLocations = {
        "101": { name: "언더우드기념도서관", coords: [37.382499674654284, 126.67110064169147] },
        "203": { name: "운동장", coords: [37.38505660284087, 126.67039362700353] },
        "305": { name: "송도1학사", coords: [37.38186484004004,126.66721220250625] },
        "405": { name: "송도2학사", coords: [37.38332087037019,126.67236874521204] },
        "302": { name: "자유관A", coords: [37.382683576045125, 126.6691958479459] },
        "301": { name: "자유관B", coords: [37.3834643374717, 126.66808021643931] },
        "510": { name: "저에너지친환경실험주택", coords: [37.38005045818827, 126.6700429389237] },
        "501": { name: "종합관", coords: [37.382286855360775, 126.66990470276706] },
        "401": { name: "진리관A", coords: [37.38334132885237, 126.67081326999616] },
        "402": { name: "진리관B", coords: [37.382962779406405, 126.67157991126135] },
        "502": { name: "진리관C", coords: [37.38183522818802, 126.67031175217751] },
        "503": { name: "진리관D", coords: [37.38114903557426, 126.67142127822844] },
      };
    
      const defaultCenter = new naver.maps.LatLng(37.3820, 126.6711394526905);
    
      const map = new naver.maps.Map('map', {
        center: defaultCenter,
        zoom: 17
      });
    
      const marker = new naver.maps.Marker({
        map: map,
        position: defaultCenter,
        visible: false
      });
    
      const infoWindow = new naver.maps.InfoWindow({
        content: '',
        maxWidth: 200,
        backgroundColor: "#fff",
        borderColor: "#2db400",
        borderWidth: 2,
        anchorSize: new naver.maps.Size(20, 20),
        anchorColor: "#fff",
        pixelOffset: new naver.maps.Point(10, -10)
      });
    
      document.getElementById("uBuilding").addEventListener("change", function () {
        const selected = this.value;
        if (buildingLocations[selected]) {
          const { name, coords } = buildingLocations[selected];
          const latlng = new naver.maps.LatLng(coords[0], coords[1]);
    
          map.setCenter(latlng);
          marker.setPosition(latlng);
          marker.setVisible(true);
    
          // Set content and bind InfoWindow
          const content = `
            <div style="padding:10px; font-size:14px;">
              <strong>${name}</strong><br/>
            </div>`;
          infoWindow.setContent(content);
          infoWindow.open(map, marker);
        } else {
          marker.setVisible(false);
          infoWindow.close();
        }
      });
    
      naver.maps.Event.addListener(marker, "click", function () {
        if (infoWindow.getMap()) {
          infoWindow.close();
        } else {
          infoWindow.open(map, marker);
        }
      });
    </script>
    
</body>

</html>